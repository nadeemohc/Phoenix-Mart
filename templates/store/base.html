{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/png" href="{% static 'img/logo.png' %}" />
    <title>Phoenix Cart</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      .product-card img {
        object-fit: cover;
        height: 200px;
      }
      .footer-links a {
        color: #ccc;
        text-decoration: none;
      }
      .footer-links a:hover {
        color: white;
      }
      .product-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr); /* Always 4 per row */
        gap: 10px;
      }

      .product-card {
        max-width: 100%;
        font-size: 0.8rem;
      }

      .product-card img {
        height: 100px; /* smaller image for mobile */
      }
    </style>
    <link
      href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  </head>
  <body class="d-flex flex-column min-vh-100">
    {% include 'components/header.html' %}

    <main class="flex-fill">{% block content %}{% endblock %}</main>

    {% include 'components/footer.html' %}

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    {% load sweetify %} {% sweetify %}
    {% block scripts %}
<script>
document.addEventListener("DOMContentLoaded", function () {
  const checkoutModal = document.getElementById("checkoutModal");

  if (checkoutModal) {
    checkoutModal.addEventListener("show.bs.modal", function () {
      fetch("{% url 'store:get_cart_summary' %}", {
        headers: { "X-Requested-With": "XMLHttpRequest" }
      })
        .then(res => res.json())
        .then(data => {
          if (data.success) {
            document.getElementById("checkoutSummary").innerHTML = data.summary_html;
          }
        })
        .catch(err => console.error("Error loading checkout summary:", err));
    });
  }
});
</script>
{% endblock %}
  </body>
</html>
